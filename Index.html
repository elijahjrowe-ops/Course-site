<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FreeLearn - Free Online Courses</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#fff;--bg2:#f7f9fa;--bg3:#1c1d1f;--text:#1c1d1f;--text2:#6a6f73;--accent:#a435f0;--success:#1e6055}
    [data-theme="dark"]{--bg:#1c1d1f;--bg2:#2d2f31;--bg3:#3e4143;--text:#fff;--text2:#a1a5aa}
    *{box-sizing:border-box;margin:0;padding:0}
    body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);min-height:100vh}
    
    .header{position:sticky;top:0;background:var(--bg);border-bottom:1px solid rgba(0,0,0,0.1);padding:0 16px;height:56px;display:flex;align-items:center;gap:12px;z-index:100}
    .logo{font-size:18px;font-weight:700;color:var(--accent);cursor:pointer}
    .search-box{flex:1;max-width:400px;position:relative}
    .search-input{width:100%;height:40px;border:1px solid #ccc;border-radius:20px;padding:0 16px 0 40px;font-size:14px;font-family:inherit;background:var(--bg2);color:var(--text)}
    .search-input:focus{outline:none;border-color:var(--accent)}
    .search-icon{position:absolute;left:14px;top:50%;transform:translateY(-50%);color:var(--text2)}
    .header-btns{display:flex;gap:8px;margin-left:auto}
    .hdr-btn{padding:8px 12px;border:none;border-radius:4px;font-size:13px;font-family:inherit;cursor:pointer;font-weight:500;background:none;color:var(--text)}
    .theme-toggle{width:36px;height:36px;border:none;background:none;font-size:18px;cursor:pointer}
    
    .hero{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;padding:40px 20px}
    .hero h1{font-size:24px;margin-bottom:8px}
    .hero p{color:rgba(255,255,255,0.8);font-size:14px}
    
    .main{padding:20px 16px;max-width:1200px;margin:0 auto}
    .section-title{font-size:18px;font-weight:700;margin-bottom:16px}
    
    .categories{display:flex;gap:8px;overflow-x:auto;padding-bottom:8px;margin-bottom:24px}
    .categories::-webkit-scrollbar{height:0}
    .cat{padding:10px 16px;background:var(--bg2);border:1px solid rgba(0,0,0,0.1);border-radius:20px;font-size:13px;white-space:nowrap;cursor:pointer;font-weight:500}
    .cat.active{background:var(--accent);color:#fff;border-color:var(--accent)}
    
    .courses{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px;margin-bottom:32px}
    .course-card{border:1px solid rgba(0,0,0,0.1);border-radius:8px;overflow:hidden;cursor:pointer;background:var(--bg);transition:box-shadow 0.2s}
    .course-card:hover{box-shadow:0 4px 16px rgba(0,0,0,0.1)}
    .course-thumb{aspect-ratio:16/9;background:var(--bg2);position:relative}
    .course-thumb img{width:100%;height:100%;object-fit:cover}
    .course-badge{position:absolute;top:8px;left:8px;background:var(--success);color:#fff;padding:4px 8px;border-radius:4px;font-size:10px;font-weight:600}
    .course-progress{position:absolute;bottom:0;left:0;right:0;height:4px;background:rgba(0,0,0,0.2)}
    .course-progress-bar{height:100%;background:var(--accent)}
    .course-info{padding:12px}
    .course-title{font-size:14px;font-weight:600;margin-bottom:4px;line-height:1.4}
    .course-instructor{font-size:12px;color:var(--text2);margin-bottom:6px}
    .course-meta{display:flex;align-items:center;gap:8px;font-size:11px;color:var(--text2)}
    .course-rating{color:#b4690e;font-weight:600}
    .stars{color:#e59819}
    .course-price{margin-top:8px;font-size:15px;font-weight:700;color:var(--success)}
    .lesson-count{font-size:11px;color:var(--text2);margin-top:4px}
    
    .continue-section{margin-bottom:32px}
    .continue-card{display:flex;gap:12px;padding:12px;border:1px solid rgba(0,0,0,0.1);border-radius:8px;margin-bottom:12px;cursor:pointer;background:var(--bg)}
    .continue-thumb{width:120px;aspect-ratio:16/9;border-radius:4px;object-fit:cover;background:var(--bg2)}
    .continue-info{flex:1}
    .continue-title{font-size:14px;font-weight:600;margin-bottom:4px}
    .continue-lesson{font-size:12px;color:var(--text2);margin-bottom:8px}
    .progress-bar{height:6px;background:var(--bg2);border-radius:3px;overflow:hidden}
    .progress-fill{height:100%;background:var(--accent)}
    .progress-text{font-size:11px;color:var(--text2);margin-top:4px}
    
    .player-page{display:none;position:fixed;inset:0;background:var(--bg);z-index:200;overflow:auto}
    .player-page.active{display:block}
    
    .player-header{display:flex;align-items:center;gap:12px;padding:12px 16px;background:var(--bg3);color:#fff}
    .back-btn{background:none;border:none;color:#fff;font-size:24px;cursor:pointer;padding:4px}
    .player-title{flex:1;font-size:14px;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .player-progress-text{font-size:12px;color:#a1a5aa}
    
    .video-wrapper{width:100%;background:#000}
    .video-container{width:100%;aspect-ratio:16/9;position:relative;background:#000}
    .video-container iframe{position:absolute;top:0;left:0;width:100%;height:100%;border:none}
    
    .video-info{padding:16px;background:var(--bg);border-bottom:1px solid rgba(0,0,0,0.1)}
    .video-title{font-size:18px;font-weight:600;margin-bottom:8px}
    .video-channel{font-size:13px;color:var(--text2);margin-bottom:12px}
    .video-btns{display:flex;gap:8px;flex-wrap:wrap}
    .vid-btn{padding:10px 16px;border:1px solid rgba(0,0,0,0.2);border-radius:4px;background:var(--bg);color:var(--text);font-size:13px;cursor:pointer;font-family:inherit;font-weight:500}
    .vid-btn:hover{background:var(--bg2)}
    .vid-btn.done{background:var(--success);color:#fff;border-color:var(--success)}
    
    .lessons-section{padding:16px;background:var(--bg)}
    .lessons-header{font-size:16px;font-weight:600;margin-bottom:12px;display:flex;justify-content:space-between;align-items:center}
    .lessons-list{border:1px solid rgba(0,0,0,0.1);border-radius:8px;overflow:hidden}
    .lesson-item{display:flex;align-items:center;gap:12px;padding:14px 16px;cursor:pointer;border-bottom:1px solid rgba(0,0,0,0.05);background:var(--bg)}
    .lesson-item:last-child{border-bottom:none}
    .lesson-item:hover{background:var(--bg2)}
    .lesson-item.active{background:rgba(164,53,240,0.1);border-left:4px solid var(--accent)}
    .lesson-item.completed .lesson-check{background:var(--success);border-color:var(--success);color:#fff}
    .lesson-check{width:24px;height:24px;border:2px solid var(--text2);border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:12px;flex-shrink:0}
    .lesson-info{flex:1}
    .lesson-num{font-size:11px;color:var(--text2);margin-bottom:2px}
    .lesson-name{font-size:14px;font-weight:500}
    .lesson-dur{font-size:12px;color:var(--text2);flex-shrink:0}
    
    .modal{position:fixed;inset:0;background:rgba(0,0,0,0.5);z-index:300;display:none;align-items:center;justify-content:center;padding:20px}
    .modal.show{display:flex}
    .modal-box{background:var(--bg);border-radius:8px;width:100%;max-width:500px;max-height:80vh;overflow:hidden;display:flex;flex-direction:column}
    .modal-header{padding:16px;border-bottom:1px solid rgba(0,0,0,0.1);font-weight:600;display:flex;justify-content:space-between;align-items:center}
    .modal-close{background:none;border:none;font-size:24px;cursor:pointer;color:var(--text)}
    .modal-content{flex:1;overflow-y:auto;padding:16px}
    .note-input{width:100%;min-height:100px;border:1px solid rgba(0,0,0,0.2);border-radius:4px;padding:12px;font-family:inherit;font-size:14px;resize:vertical;margin-bottom:12px;background:var(--bg);color:var(--text)}
    .note-item{padding:12px;background:var(--bg2);border-radius:4px;margin-bottom:8px}
    .note-time{font-size:11px;color:var(--accent);font-weight:600;margin-bottom:4px}
    .note-text{font-size:13px}
    .note-delete{font-size:11px;color:#e74c3c;cursor:pointer;float:right}
    .save-note{background:var(--accent);color:#fff;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-family:inherit;font-weight:600}
    
    .cert-modal{position:fixed;inset:0;background:rgba(0,0,0,0.8);z-index:300;display:none;align-items:center;justify-content:center;padding:20px}
    .cert-modal.show{display:flex}
    .cert-box{background:#fff;border-radius:12px;padding:40px;text-align:center;max-width:400px;width:100%}
    .cert-icon{font-size:60px;margin-bottom:16px}
    .cert-title{font-size:24px;font-weight:700;color:#1c1d1f;margin-bottom:8px}
    .cert-course{font-size:14px;color:#6a6f73;margin-bottom:24px}
    .cert-btn{background:var(--accent);color:#fff;border:none;padding:12px 32px;border-radius:4px;cursor:pointer;font-family:inherit;font-weight:600;font-size:14px}
    
    .empty{text-align:center;padding:40px;color:var(--text2)}
    
    @media(max-width:600px){
      .courses{grid-template-columns:1fr}
      .continue-thumb{width:80px}
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="logo" onclick="goHome()">üéì FreeLearn</div>
    <div class="search-box">
      <span class="search-icon">üîç</span>
      <input type="text" class="search-input" placeholder="Search courses..." id="searchInput" oninput="searchCourses()">
    </div>
    <div class="header-btns">
      <button class="hdr-btn" onclick="showMyLearning()">My Learning</button>
      <button class="theme-toggle" onclick="toggleTheme()" id="themeBtn">üåô</button>
    </div>
  </header>
  
  <div id="homePage">
    <div class="hero">
      <h1>Learn anything. 100% Free.</h1>
      <p>50+ courses on coding, music, art, cooking, fitness & more</p>
    </div>
    
    <main class="main">
      <div class="categories" id="categories"></div>
      
      <div class="continue-section" id="continueSection" style="display:none">
        <div class="section-title">üìö Continue Learning</div>
        <div id="continueList"></div>
      </div>
      
      <div class="section-title">üî• All Courses</div>
      <div class="courses" id="courseGrid"></div>
    </main>
  </div>
  
  <div class="player-page" id="playerPage">
    <div class="player-header">
      <button class="back-btn" onclick="exitCourse()">‚Üê</button>
      <div class="player-title" id="playerCourseTitle"></div>
      <div class="player-progress-text" id="playerProgressText">0%</div>
    </div>
    <div class="video-wrapper">
      <div class="video-container" id="videoContainer"></div>
    </div>
    <div class="video-info">
      <div class="video-title" id="videoTitle">Select a lesson</div>
      <div class="video-channel" id="videoChannel"></div>
      <div class="video-btns">
        <button class="vid-btn" id="completeBtn" onclick="toggleComplete()">‚úì Mark Complete</button>
        <button class="vid-btn" onclick="openNotes()">üìù Notes</button>
        <button class="vid-btn" onclick="prevLesson()">‚Üê Previous</button>
        <button class="vid-btn" onclick="nextLesson()">Next ‚Üí</button>
      </div>
    </div>
    <div class="lessons-section">
      <div class="lessons-header">
        <span>Course Content</span>
        <span id="lessonCount"></span>
      </div>
      <div class="lessons-list" id="lessonList"></div>
    </div>
  </div>
  
  <div class="modal" id="notesModal">
    <div class="modal-box">
      <div class="modal-header">
        <span>üìù My Notes</span>
        <button class="modal-close" onclick="closeNotes()">√ó</button>
      </div>
      <div class="modal-content">
        <textarea class="note-input" id="noteInput" placeholder="Write a note..."></textarea>
        <button class="save-note" onclick="saveNote()">Save Note</button>
        <div id="notesList" style="margin-top:16px"></div>
      </div>
    </div>
  </div>
  
  <div class="cert-modal" id="certModal">
    <div class="cert-box">
      <div class="cert-icon">üéâ</div>
      <div class="cert-title">Congratulations!</div>
      <div class="cert-course" id="certCourse"></div>
      <div style="margin-bottom:24px;color:#1c1d1f">You completed this course!</div>
      <button class="cert-btn" onclick="closeCert()">Continue Learning</button>
    </div>
  </div>

<script>
const courses = [
  // ===== PROGRAMMING =====
  {
    id: 1, title: "Python for Beginners", instructor: "Programming with Mosh", category: "Programming", rating: 4.9, students: 2500000,
    thumb: "https://img.youtube.com/vi/kqtD5dpn9C8/hqdefault.jpg",
    lessons: [
      {title: "Python Full Course", videoId: "kqtD5dpn9C8", duration: "60:05"},
      {title: "Python Functions", videoId: "u-OmVr_fT4s", duration: "12:34"},
      {title: "Python Classes", videoId: "wfcWRAxRVBA", duration: "17:38"},
      {title: "Python Lists", videoId: "tw7ror9x32s", duration: "10:44"}
    ]
  },
  {
    id: 2, title: "JavaScript Crash Course", instructor: "Traversy Media", category: "Programming", rating: 4.8, students: 3200000,
    thumb: "https://img.youtube.com/vi/hdI2bqOjy3c/hqdefault.jpg",
    lessons: [
      {title: "JavaScript Crash Course", videoId: "hdI2bqOjy3c", duration: "100:23"},
      {title: "DOM Crash Course Part 1", videoId: "0ik6X4DJKCc", duration: "39:03"},
      {title: "DOM Crash Course Part 2", videoId: "mPd2aJXCZ2g", duration: "21:50"},
      {title: "Fetch API", videoId: "Oive66jrwBs", duration: "12:28"}
    ]
  },
  {
    id: 3, title: "HTML & CSS", instructor: "Traversy Media", category: "Programming", rating: 4.7, students: 1800000,
    thumb: "https://img.youtube.com/vi/UB1O30fR-EE/hqdefault.jpg",
    lessons: [
      {title: "HTML Crash Course", videoId: "UB1O30fR-EE", duration: "60:00"},
      {title: "CSS Crash Course", videoId: "yfoY53QXEnI", duration: "85:10"},
      {title: "Flexbox in 20 Minutes", videoId: "JJSoEo8JSnc", duration: "20:49"},
      {title: "CSS Grid Crash Course", videoId: "jV8B24rSN5o", duration: "27:55"}
    ]
  },
  {
    id: 4, title: "React JS", instructor: "Traversy Media", category: "Programming", rating: 4.9, students: 1400000,
    thumb: "https://img.youtube.com/vi/w7ejDZ8SWv8/hqdefault.jpg",
    lessons: [
      {title: "React Crash Course", videoId: "w7ejDZ8SWv8", duration: "108:47"},
      {title: "React Hooks", videoId: "iVRO0toVdYM", duration: "29:30"},
      {title: "Redux Crash Course", videoId: "93p3LxR9xfM", duration: "46:23"}
    ]
  },

  // ===== MUSIC =====
  {
    id: 5, title: "Guitar for Beginners", instructor: "JustinGuitar", category: "Music", rating: 4.9, students: 890000,
    thumb: "https://img.youtube.com/vi/BBz-Jyr23M4/hqdefault.jpg",
    lessons: [
      {title: "First Guitar Lesson", videoId: "BBz-Jyr23M4", duration: "17:38"},
      {title: "Easy Chord Changes", videoId: "4JmzCpqjRok", duration: "12:23"},
      {title: "Your First Song", videoId: "5T7Bx3R5sWE", duration: "15:41"},
      {title: "Strumming Patterns", videoId: "DlvIFihCsXs", duration: "18:22"},
      {title: "Basic Music Theory", videoId: "MxPw4AxwQVA", duration: "14:55"}
    ]
  },
  {
    id: 6, title: "Piano for Beginners", instructor: "Piano with Jonny", category: "Music", rating: 4.8, students: 650000,
    thumb: "https://img.youtube.com/vi/827jmswqnEA/hqdefault.jpg",
    lessons: [
      {title: "First Piano Lesson", videoId: "827jmswqnEA", duration: "23:45"},
      {title: "Reading Sheet Music", videoId: "M0t4Qjbx2DM", duration: "19:32"},
      {title: "Piano Chords for Beginners", videoId: "xNPbOXJifXo", duration: "15:21"},
      {title: "Playing Your First Song", videoId: "bgLnkqvvTj4", duration: "12:08"}
    ]
  },
  {
    id: 7, title: "Music Production", instructor: "In The Mix", category: "Music", rating: 4.7, students: 420000,
    thumb: "https://img.youtube.com/vi/dXiIOLmdRks/hqdefault.jpg",
    lessons: [
      {title: "Music Production Basics", videoId: "dXiIOLmdRks", duration: "28:15"},
      {title: "FL Studio Tutorial", videoId: "pDIsEZsalAo", duration: "60:00"},
      {title: "Mixing for Beginners", videoId: "TEjOdqZFvhY", duration: "31:42"},
      {title: "Mastering Explained", videoId: "xMiJGLBRpnM", duration: "18:33"}
    ]
  },
  {
    id: 8, title: "Singing Lessons", instructor: "Cheryl Porter", category: "Music", rating: 4.8, students: 380000,
    thumb: "https://img.youtube.com/vi/ZATunybHm-g/hqdefault.jpg",
    lessons: [
      {title: "Beginner Vocal Warmup", videoId: "ZATunybHm-g", duration: "12:08"},
      {title: "Breath Control", videoId: "5a6Rcx0qnkM", duration: "15:22"},
      {title: "Extend Your Range", videoId: "3wYQOF2ltig", duration: "18:41"},
      {title: "Sing High Notes", videoId: "gvt39mvL5-8", duration: "14:33"}
    ]
  },

  // ===== COOKING =====
  {
    id: 9, title: "Cooking Basics", instructor: "Joshua Weissman", category: "Cooking", rating: 4.9, students: 720000,
    thumb: "https://img.youtube.com/vi/ZJy1ajvMU1k/hqdefault.jpg",
    lessons: [
      {title: "Knife Skills 101", videoId: "ZJy1ajvMU1k", duration: "15:22"},
      {title: "Perfect Scrambled Eggs", videoId: "LklVOk4JBVc", duration: "10:18"},
      {title: "How to Make Pasta", videoId: "HdSLKZ6LN94", duration: "18:45"},
      {title: "Perfect Rice Every Time", videoId: "Xx_OR6YeVZM", duration: "12:33"},
      {title: "Basic Sauces", videoId: "wqECvYJKHPM", duration: "21:08"}
    ]
  },
  {
    id: 10, title: "Baking for Beginners", instructor: "Preppy Kitchen", category: "Cooking", rating: 4.8, students: 480000,
    thumb: "https://img.youtube.com/vi/pYOa6hPOEYM/hqdefault.jpg",
    lessons: [
      {title: "Chocolate Chip Cookies", videoId: "pYOa6hPOEYM", duration: "8:12"},
      {title: "Perfect Banana Bread", videoId: "YvH7sBG0Alg", duration: "7:45"},
      {title: "Classic Brownies", videoId: "fDVqnx2JqHg", duration: "9:22"},
      {title: "Easy Cake Recipe", videoId: "t5S6_ROcsmY", duration: "12:18"}
    ]
  },
  {
    id: 11, title: "Italian Cooking", instructor: "Italia Squisita", category: "Cooking", rating: 4.7, students: 320000,
    thumb: "https://img.youtube.com/vi/ZFbBVCxfVP8/hqdefault.jpg",
    lessons: [
      {title: "Perfect Carbonara", videoId: "ZFbBVCxfVP8", duration: "8:35"},
      {title: "Homemade Pizza", videoId: "G-jPoROGHGE", duration: "15:42"},
      {title: "Fresh Pasta Dough", videoId: "HdSLKZ6LN94", duration: "18:45"},
      {title: "Tiramisu Recipe", videoId: "7VTtenyE2wY", duration: "11:22"}
    ]
  },

  // ===== FITNESS =====
  {
    id: 12, title: "Home Workout", instructor: "THENX", category: "Fitness", rating: 4.8, students: 920000,
    thumb: "https://img.youtube.com/vi/UItWltVZZmE/hqdefault.jpg",
    lessons: [
      {title: "Complete Home Workout", videoId: "UItWltVZZmE", duration: "22:15"},
      {title: "Build Muscle at Home", videoId: "Pv0eBN7-MKI", duration: "18:33"},
      {title: "Core Workout", videoId: "DHD1-2P94DI", duration: "15:42"},
      {title: "Push Up Variations", videoId: "IODxDxX7oi4", duration: "12:08"}
    ]
  },
  {
    id: 13, title: "Yoga for Beginners", instructor: "Yoga With Adriene", category: "Fitness", rating: 4.9, students: 1200000,
    thumb: "https://img.youtube.com/vi/v7AYKMP6rOE/hqdefault.jpg",
    lessons: [
      {title: "Yoga For Complete Beginners", videoId: "v7AYKMP6rOE", duration: "23:21"},
      {title: "Morning Yoga", videoId: "4pKly2JojMw", duration: "20:15"},
      {title: "Yoga for Stress Relief", videoId: "hJbRpHZr_d0", duration: "28:42"},
      {title: "Bedtime Yoga", videoId: "-g5aJQmN7sk", duration: "22:08"}
    ]
  },
  {
    id: 14, title: "Weight Training", instructor: "Jeff Nippard", category: "Fitness", rating: 4.8, students: 680000,
    thumb: "https://img.youtube.com/vi/R6gZoAzAhCg/hqdefault.jpg",
    lessons: [
      {title: "Beginner Weight Training", videoId: "R6gZoAzAhCg", duration: "15:22"},
      {title: "How to Build Muscle", videoId: "Fv5Wz8xi40k", duration: "12:45"},
      {title: "Squat Tutorial", videoId: "ultWZbUMPL8", duration: "18:33"},
      {title: "Deadlift Tutorial", videoId: "r4MzxtBKyNE", duration: "14:21"}
    ]
  },

  // ===== ART & DRAWING =====
  {
    id: 15, title: "Drawing for Beginners", instructor: "Proko", category: "Art", rating: 4.8, students: 560000,
    thumb: "https://img.youtube.com/vi/1EPNYWeEf1U/hqdefault.jpg",
    lessons: [
      {title: "How to Draw Basics", videoId: "1EPNYWeEf1U", duration: "18:22"},
      {title: "Drawing Faces", videoId: "wAOldLWIDSM", duration: "24:15"},
      {title: "Shading Techniques", videoId: "V3WmrWUEIJo", duration: "21:08"},
      {title: "Drawing Hands", videoId: "2CmrMRXoA8Q", duration: "25:33"}
    ]
  },
  {
    id: 16, title: "Watercolor Painting", instructor: "Makoccino", category: "Art", rating: 4.7, students: 340000,
    thumb: "https://img.youtube.com/vi/O-0L3DI6bm4/hqdefault.jpg",
    lessons: [
      {title: "Watercolor Basics", videoId: "O-0L3DI6bm4", duration: "15:42"},
      {title: "Color Mixing", videoId: "Lk9gPPHl0YQ", duration: "18:21"},
      {title: "Painting Skies", videoId: "qqDPVMjG13U", duration: "12:55"},
      {title: "Watercolor Landscapes", videoId: "5Z08nM7CtPQ", duration: "22:18"}
    ]
  },
  {
    id: 17, title: "Digital Art", instructor: "Sinix Design", category: "Art", rating: 4.8, students: 420000,
    thumb: "https://img.youtube.com/vi/9b7odHqHlpA/hqdefault.jpg",
    lessons: [
      {title: "Digital Painting Basics", videoId: "9b7odHqHlpA", duration: "15:33"},
      {title: "Anatomy Quick Tips", videoId: "IVbqoy_JEV0", duration: "12:22"},
      {title: "Coloring Tutorial", videoId: "gwLQ0cDb4cE", duration: "18:41"},
      {title: "Paint Tool SAI Tutorial", videoId: "3Iv5u_pkfn0", duration: "21:15"}
    ]
  },

  // ===== PHOTOGRAPHY =====
  {
    id: 18, title: "Photography Basics", instructor: "Peter McKinnon", category: "Photography", rating: 4.9, students: 780000,
    thumb: "https://img.youtube.com/vi/LxO-6rlihSg/hqdefault.jpg",
    lessons: [
      {title: "Photography for Beginners", videoId: "LxO-6rlihSg", duration: "12:22"},
      {title: "Camera Settings Explained", videoId: "F8T94sdiNjc", duration: "15:45"},
      {title: "Composition Tips", videoId: "O8i7OKbWmRM", duration: "11:33"},
      {title: "Natural Lighting", videoId: "WE6QnXMvW6s", duration: "14:18"}
    ]
  },
  {
    id: 19, title: "Photo Editing", instructor: "PHLEARN", category: "Photography", rating: 4.8, students: 520000,
    thumb: "https://img.youtube.com/vi/IyR_uYsRdPs/hqdefault.jpg",
    lessons: [
      {title: "Photoshop Basics", videoId: "IyR_uYsRdPs", duration: "130:32"},
      {title: "Lightroom Tutorial", videoId: "BG_r8CQGzyc", duration: "28:15"},
      {title: "Color Grading", videoId: "K_ckEKwu_VA", duration: "18:42"},
      {title: "Retouching Tutorial", videoId: "suDzka9C2Lw", duration: "22:08"}
    ]
  },

  // ===== LANGUAGES =====
  {
    id: 20, title: "Spanish for Beginners", instructor: "SpanishPod101", category: "Languages", rating: 4.7, students: 680000,
    thumb: "https://img.youtube.com/vi/DAp_v7EH9AA/hqdefault.jpg",
    lessons: [
      {title: "Spanish in 30 Minutes", videoId: "DAp_v7EH9AA", duration: "31:15"},
      {title: "Spanish Alphabet", videoId: "hsLYD1Jyf3A", duration: "8:42"},
      {title: "Common Spanish Phrases", videoId: "HvAdOvfrSvk", duration: "22:18"},
      {title: "Spanish Verbs", videoId: "TlBVLYBcE0A", duration: "18:33"}
    ]
  },
  {
    id: 21, title: "French for Beginners", instructor: "FrenchPod101", category: "Languages", rating: 4.7, students: 520000,
    thumb: "https://img.youtube.com/vi/ujDtm0hZyII/hqdefault.jpg",
    lessons: [
      {title: "French in 30 Minutes", videoId: "ujDtm0hZyII", duration: "28:45"},
      {title: "French Pronunciation", videoId: "1qAVMqYNwx0", duration: "15:22"},
      {title: "Common French Phrases", videoId: "N-2KWQOtXTo", duration: "42:15"},
      {title: "French Grammar Basics", videoId: "bmsVshAs0hg", duration: "18:08"}
    ]
  },
  {
    id: 22, title: "Japanese for Beginners", instructor: "JapanesePod101", category: "Languages", rating: 4.8, students: 620000,
    thumb: "https://img.youtube.com/vi/6p9Il_j0zjc/hqdefault.jpg",
    lessons: [
      {title: "Japanese for Beginners", videoId: "6p9Il_j0zjc", duration: "180:00"},
      {title: "Hiragana in 1 Hour", videoId: "6p9Il_j0zjc", duration: "62:15"},
      {title: "Basic Japanese Phrases", videoId: "ogz9NdSVg4I", duration: "45:33"},
      {title: "Japanese Numbers", videoId: "F6lfOhU__1A", duration: "18:22"}
    ]
  },

  // ===== BUSINESS =====
  {
    id: 23, title: "Excel Mastery", instructor: "Kevin Stratvert", category: "Business", rating: 4.7, students: 680000,
    thumb: "https://img.youtube.com/vi/Vl0H-qTclOg/hqdefault.jpg",
    lessons: [
      {title: "Excel Full Course", videoId: "Vl0H-qTclOg", duration: "136:09"},
      {title: "Excel Formulas", videoId: "HqoKHdNiL70", duration: "44:30"},
      {title: "Pivot Tables", videoId: "qu-AK0Hv0b4", duration: "29:11"}
    ]
  },
  {
    id: 24, title: "Public Speaking", instructor: "Charisma on Command", category: "Business", rating: 4.8, students: 450000,
    thumb: "https://img.youtube.com/vi/JWdZEumNRmI/hqdefault.jpg",
    lessons: [
      {title: "How to Speak with Confidence", videoId: "JWdZEumNRmI", duration: "12:15"},
      {title: "Presentation Tips", videoId: "Iwpi1Lm6dFo", duration: "11:42"},
      {title: "Body Language", videoId: "cFLjudWTuGQ", duration: "15:33"},
      {title: "Storytelling Techniques", videoId: "Nj-hdQMa3uA", duration: "13:28"}
    ]
  },
  {
    id: 25, title: "Personal Finance", instructor: "Two Cents", category: "Business", rating: 4.8, students: 390000,
    thumb: "https://img.youtube.com/vi/HQzoZfc3GwQ/hqdefault.jpg",
    lessons: [
      {title: "Investing for Beginners", videoId: "HQzoZfc3GwQ", duration: "10:15"},
      {title: "How to Budget", videoId: "sVKQn2I4HDM", duration: "8:42"},
      {title: "Credit Cards Explained", videoId: "bIBtodGFXHw", duration: "11:33"},
      {title: "Retirement Planning", videoId: "wf5KAfZqE6g", duration: "12:18"}
    ]
  },

  // ===== SCIENCE =====
  {
    id: 26, title: "Physics Basics", instructor: "Veritasium", category: "Science", rating: 4.9, students: 720000,
    thumb: "https://img.youtube.com/vi/FjHJ7FmV0M4/hqdefault.jpg",
    lessons: [
      {title: "The Science of Thinking", videoId: "UBVV8pch1dM", duration: "11:42"},
      {title: "How Electricity Works", videoId: "oI_X2cMHNe0", duration: "14:22"},
      {title: "Gravity Explained", videoId: "XRr1kaXKBsU", duration: "18:15"},
      {title: "Quantum Physics Intro", videoId: "p-MNSLsjjdo", duration: "15:33"}
    ]
  },
  {
    id: 27, title: "Chemistry Basics", instructor: "Tyler DeWitt", category: "Science", rating: 4.8, students: 480000,
    thumb: "https://img.youtube.com/vi/FSyAehMdpyI/hqdefault.jpg",
    lessons: [
      {title: "Intro to Chemistry", videoId: "FSyAehMdpyI", duration: "15:22"},
      {title: "The Periodic Table", videoId: "0RRVV4Diomg", duration: "12:45"},
      {title: "Chemical Reactions", videoId: "yQP4UJhNn0I", duration: "18:33"},
      {title: "Balancing Equations", videoId: "RnGu3xO2h74", duration: "14:08"}
    ]
  },
  {
    id: 28, title: "Astronomy Basics", instructor: "PBS Space Time", category: "Science", rating: 4.9, students: 560000,
    thumb: "https://img.youtube.com/vi/rB0rkJwkMvk/hqdefault.jpg",
    lessons: [
      {title: "How the Universe Works", videoId: "rB0rkJwkMvk", duration: "12:42"},
      {title: "Black Holes Explained", videoId: "ulCdoCfw-bY", duration: "15:22"},
      {title: "The Big Bang", videoId: "wNDGgL73ihY", duration: "14:18"},
      {title: "Dark Matter", videoId: "QAa2O_8wBUQ", duration: "13:45"}
    ]
  },

  // ===== MATH =====
  {
    id: 29, title: "Algebra Basics", instructor: "Professor Leonard", category: "Math", rating: 4.9, students: 620000,
    thumb: "https://img.youtube.com/vi/LwCRRUa8yTU/hqdefault.jpg",
    lessons: [
      {title: "Intro to Algebra", videoId: "LwCRRUa8yTU", duration: "42:15"},
      {title: "Solving Equations", videoId: "TA4Qo8RUjHc", duration: "38:22"},
      {title: "Graphing Lines", videoId: "rgvysb9emcQ", duration: "35:18"},
      {title: "Quadratic Equations", videoId: "pfvPFqk8hPw", duration: "48:33"}
    ]
  },
  {
    id: 30, title: "Calculus Basics", instructor: "3Blue1Brown", category: "Math", rating: 4.9, students: 890000,
    thumb: "https://img.youtube.com/vi/WUvTyaaNkzM/hqdefault.jpg",
    lessons: [
      {title: "Essence of Calculus", videoId: "WUvTyaaNkzM", duration: "17:04"},
      {title: "Derivatives", videoId: "9vKqVkMQHKk", duration: "17:57"},
      {title: "Integrals", videoId: "rfG8ce4nNh0", duration: "20:46"},
      {title: "Chain Rule", videoId: "YG15m2VwSjA", duration: "18:21"}
    ]
  },

  // ===== HISTORY =====
  {
    id: 31, title: "World History", instructor: "CrashCourse", category: "History", rating: 4.8, students: 780000,
    thumb: "https://img.youtube.com/vi/Yocja_N5s1I/hqdefault.jpg",
    lessons: [
      {title: "Agricultural Revolution", videoId: "Yocja_N5s1I", duration: "11:10"},
      {title: "Ancient Egypt", videoId: "Z3Wvw6BivVI", duration: "12:08"},
      {title: "Ancient Greece", videoId: "Q-mkVSasZIM", duration: "11:44"},
      {title: "Roman Empire", videoId: "oPf27gAup9U", duration: "12:25"},
      {title: "The Renaissance", videoId: "Vufba_ZDvPM", duration: "12:42"}
    ]
  },
  {
    id: 32, title: "World War II", instructor: "Kings and Generals", category: "History", rating: 4.9, students: 520000,
    thumb: "https://img.youtube.com/vi/Q78COTwT7nE/hqdefault.jpg",
    lessons: [
      {title: "How WW2 Started", videoId: "Q78COTwT7nE", duration: "20:15"},
      {title: "D-Day Explained", videoId: "rQX1Pc5fvVY", duration: "22:33"},
      {title: "Battle of Stalingrad", videoId: "1g2LgqYd0c8", duration: "18:42"},
      {title: "Pacific Theatre", videoId: "iN5qiOcQj3A", duration: "25:18"}
    ]
  },

  // ===== PERSONAL DEVELOPMENT =====
  {
    id: 33, title: "Meditation Basics", instructor: "Headspace", category: "Wellness", rating: 4.8, students: 680000,
    thumb: "https://img.youtube.com/vi/thcEuMDWxoI/hqdefault.jpg",
    lessons: [
      {title: "What is Meditation?", videoId: "thcEuMDWxoI", duration: "3:42"},
      {title: "Breathing Techniques", videoId: "aNXKjGFUlMs", duration: "5:15"},
      {title: "10 Minute Meditation", videoId: "O-6f5wQXSu8", duration: "10:22"},
      {title: "Sleep Meditation", videoId: "rvaqPPjtxng", duration: "15:08"}
    ]
  },
  {
    id: 34, title: "Productivity Hacks", instructor: "Thomas Frank", category: "Wellness", rating: 4.7, students: 450000,
    thumb: "https://img.youtube.com/vi/IlU-zDU6aQ0/hqdefault.jpg",
    lessons: [
      {title: "How to Study Effectively", videoId: "IlU-zDU6aQ0", duration: "12:08"},
      {title: "Morning Routine", videoId: "B12jLd0UoLg", duration: "9:45"},
      {title: "Note Taking Tips", videoId: "AffuwyJZTQQ", duration: "11:22"},
      {title: "Time Management", videoId: "iONDebHX9qk", duration: "14:33"}
    ]
  },

  // ===== VIDEO & FILM =====
  {
    id: 35, title: "Video Editing Basics", instructor: "Premiere Gal", category: "Video", rating: 4.7, students: 420000,
    thumb: "https://img.youtube.com/vi/Hls3Tp7JS8E/hqdefault.jpg",
    lessons: [
      {title: "Premiere Pro for Beginners", videoId: "Hls3Tp7JS8E", duration: "21:15"},
      {title: "Basic Editing Techniques", videoId: "OJ-3d5IMa3k", duration: "18:42"},
      {title: "Color Grading", videoId: "x0D5TZTQX5k", duration: "15:33"},
      {title: "Adding Music & Sound", videoId: "62S8r0SKMCQ", duration: "12:08"}
    ]
  },
  {
    id: 36, title: "Cinematography", instructor: "StudioBinder", category: "Video", rating: 4.8, students: 340000,
    thumb: "https://img.youtube.com/vi/3gXsKt5SO0Y/hqdefault.jpg",
    lessons: [
      {title: "Camera Angles Explained", videoId: "3gXsKt5SO0Y", duration: "10:22"},
      {title: "Lighting Techniques", videoId: "2SexbdE3MfY", duration: "12:15"},
      {title: "Shot Composition", videoId: "cIvGRi6tf8I", duration: "14:42"},
      {title: "Camera Movement", videoId: "IiyBo-qLDeM", duration: "11:33"}
    ]
  },

  // ===== GAMING =====
  {
    id: 37, title: "Chess for Beginners", instructor: "GothamChess", category: "Gaming", rating: 4.9, students: 580000,
    thumb: "https://img.youtube.com/vi/OCSbzArwB10/hqdefault.jpg",
    lessons: [
      {title: "How to Play Chess", videoId: "OCSbzArwB10", duration: "26:42"},
      {title: "Chess Openings", videoId: "3OK-S9oMcOY", duration: "22:15"},
      {title: "Chess Tactics", videoId: "3I9Gbi8NJPU", duration: "18:33"},
      {title: "Endgame Basics", videoId: "F9XD4WthENU", duration: "15:22"}
    ]
  },
  {
    id: 38, title: "Game Design", instructor: "Game Maker's Toolkit", category: "Gaming", rating: 4.8, students: 320000,
    thumb: "https://img.youtube.com/vi/kMDe7_YwVKI/hqdefault.jpg",
    lessons: [
      {title: "Game Design Basics", videoId: "kMDe7_YwVKI", duration: "12:08"},
      {title: "Level Design 101", videoId: "iNEe3KhMvXM", duration: "15:42"},
      {title: "Player Psychology", videoId: "M27EKsXzPjA", duration: "11:22"},
      {title: "Balancing Games", videoId: "tR-9oXiytsk", duration: "13:15"}
    ]
  },

  // ===== MORE PROGRAMMING =====
  {
    id: 39, title: "Git & GitHub", instructor: "Traversy Media", category: "Programming", rating: 4.8, students: 890000,
    thumb: "https://img.youtube.com/vi/SWYqp7iY_Tc/hqdefault.jpg",
    lessons: [
      {title: "Git & GitHub Crash Course", videoId: "SWYqp7iY_Tc", duration: "32:41"},
      {title: "Git Branches", videoId: "e2IbNHi4uCI", duration: "14:27"},
      {title: "Git Tutorial Full", videoId: "DVRQoVRzMIY", duration: "45:21"}
    ]
  },
  {
    id: 40, title: "SQL Databases", instructor: "Programming with Mosh", category: "Programming", rating: 4.7, students: 720000,
    thumb: "https://img.youtube.com/vi/7S_tz1z_5bA/hqdefault.jpg",
    lessons: [
      {title: "SQL Tutorial Full Course", videoId: "7S_tz1z_5bA", duration: "190:20"},
      {title: "MySQL Tutorial", videoId: "HXV3zeQKqGY", duration: "200:47"}
    ]
  },

  // ===== DESIGN =====
  {
    id: 41, title: "Figma for Beginners", instructor: "DesignCourse", category: "Design", rating: 4.6, students: 420000,
    thumb: "https://img.youtube.com/vi/jwCmIBJ8Jtc/hqdefault.jpg",
    lessons: [
      {title: "Figma Tutorial", videoId: "jwCmIBJ8Jtc", duration: "60:00"},
      {title: "Figma UI Design", videoId: "FTFaQWZBqQ8", duration: "42:47"},
      {title: "Figma to Code", videoId: "fZ-bKwwNMCw", duration: "32:12"}
    ]
  },
  {
    id: 42, title: "Logo Design", instructor: "Will Paterson", category: "Design", rating: 4.7, students: 280000,
    thumb: "https://img.youtube.com/vi/pT0k5pHfgXE/hqdefault.jpg",
    lessons: [
      {title: "Logo Design Basics", videoId: "pT0k5pHfgXE", duration: "15:22"},
      {title: "Logo Design Process", videoId: "BvwBVQdY1u4", duration: "22:15"},
      {title: "Typography for Logos", videoId: "Ck1bEQT-v0w", duration: "12:42"},
      {title: "Color in Branding", videoId: "9QTCvayLhCA", duration: "18:33"}
    ]
  },

  // ===== CRAFTS =====
  {
    id: 43, title: "Knitting Basics", instructor: "RJ Knits", category: "Crafts", rating: 4.7, students: 180000,
    thumb: "https://img.youtube.com/vi/p_R1UDsNOMk/hqdefault.jpg",
    lessons: [
      {title: "Knitting for Beginners", videoId: "p_R1UDsNOMk", duration: "22:15"},
      {title: "Cast On Tutorial", videoId: "3vE3W8EsJfQ", duration: "8:42"},
      {title: "Basic Knit Stitch", videoId: "S8sT3mD1Y88", duration: "12:08"},
      {title: "Purl Stitch Tutorial", videoId: "YbAvVa2x4m0", duration: "10:33"}
    ]
  },
  {
    id: 44, title: "Woodworking Basics", instructor: "Steve Ramsey", category: "Crafts", rating: 4.8, students: 320000,
    thumb: "https://img.youtube.com/vi/KnKDvUG3Xxk/hqdefault.jpg",
    lessons: [
      {title: "Woodworking for Beginners", videoId: "KnKDvUG3Xxk", duration: "18:22"},
      {title: "Essential Tools", videoId: "8exUt-nBWnc", duration: "15:42"},
      {title: "First Project", videoId: "hC5Zr5U6vPQ", duration: "22:15"},
      {title: "Wood Finishing", videoId: "W2pHkxz8m0Y", duration: "12:33"}
    ]
  },

  // ===== MORE =====
  {
    id: 45, title: "3D Modeling Basics", instructor: "Blender Guru", category: "Design", rating: 4.9, students: 680000,
    thumb: "https://img.youtube.com/vi/nIoXOplUvAw/hqdefault.jpg",
    lessons: [
      {title: "Blender Tutorial Part 1", videoId: "nIoXOplUvAw", duration: "14:33"},
      {title: "Blender Tutorial Part 2", videoId: "imdYIdv8F4w", duration: "13:42"},
      {title: "Blender Tutorial Part 3", videoId: "jnj2BL4chaQ", duration: "17:22"},
      {title: "Blender Tutorial Part 4", videoId: "Rqv13kdLcNw", duration: "18:15"}
    ]
  },
  {
    id: 46, title: "Animation Basics", instructor: "Bloop Animation", category: "Design", rating: 4.7, students: 240000,
    thumb: "https://img.youtube.com/vi/uDqjIdI4bF4/hqdefault.jpg",
    lessons: [
      {title: "12 Principles of Animation", videoId: "uDqjIdI4bF4", duration: "17:42"},
      {title: "Timing and Spacing", videoId: "fQBFsTqbKhY", duration: "8:15"},
      {title: "Walk Cycle Tutorial", videoId: "2y6aVz0Acx0", duration: "22:33"},
      {title: "Lip Sync Animation", videoId: "aXTOUnzNo64", duration: "15:08"}
    ]
  },
  {
    id: 47, title: "Podcasting 101", instructor: "Pat Flynn", category: "Business", rating: 4.6, students: 180000,
    thumb: "https://img.youtube.com/vi/kZEYPNVINBw/hqdefault.jpg",
    lessons: [
      {title: "How to Start a Podcast", videoId: "kZEYPNVINBw", duration: "25:15"},
      {title: "Podcast Equipment", videoId: "S78KYBRbXOM", duration: "18:42"},
      {title: "Recording Your Podcast", videoId: "qC4VYqXM-nw", duration: "15:33"},
      {title: "Editing Your Podcast", videoId: "OEgkag4HDXA", duration: "22:08"}
    ]
  },
  {
    id: 48, title: "Nutrition Basics", instructor: "Jeff Nippard", category: "Fitness", rating: 4.8, students: 420000,
    thumb: "https://img.youtube.com/vi/9yJKpnfVZWQ/hqdefault.jpg",
    lessons: [
      {title: "Nutrition Science", videoId: "d4_U90gQS0c", duration: "18:22"},
      {title: "How to Count Calories", videoId: "qk_U2r8pT14", duration: "12:15"},
      {title: "Protein Explained", videoId: "Pok0Jg2JAkE", duration: "15:42"},
      {title: "Meal Prep Basics", videoId: "K_oILEkvJzU", duration: "22:08"}
    ]
  },
  {
    id: 49, title: "Psychology Intro", instructor: "CrashCourse", category: "Science", rating: 4.8, students: 580000,
    thumb: "https://img.youtube.com/vi/vo4pMVb0R6M/hqdefault.jpg",
    lessons: [
      {title: "Intro to Psychology", videoId: "vo4pMVb0R6M", duration: "10:33"},
      {title: "The Brain", videoId: "vHrmiy4W9C0", duration: "11:08"},
      {title: "Consciousness", videoId: "jReX7qKU2yc", duration: "11:42"},
      {title: "Memory", videoId: "bSycdIx-C48", duration: "10:55"}
    ]
  },
  {
    id: 50, title: "Philosophy Intro", instructor: "CrashCourse", category: "Science", rating: 4.7, students: 420000,
    thumb: "https://img.youtube.com/vi/1A_CAkYt3GY/hqdefault.jpg",
    lessons: [
      {title: "What is Philosophy?", videoId: "1A_CAkYt3GY", duration: "10:08"},
      {title: "Plato", videoId: "VDiyQub6vpw", duration: "9:42"},
      {title: "Aristotle", videoId: "csIW4W_DYX4", duration: "10:15"},
      {title: "Existentialism", videoId: "YaDvRdLMkHs", duration: "9:55"}
    ]
  }
];

const categories = ['All', 'Programming', 'Music', 'Cooking', 'Fitness', 'Art', 'Photography', 'Languages', 'Business', 'Science', 'Math', 'History', 'Wellness', 'Video', 'Gaming', 'Design', 'Crafts'];

let currentCategory = 'All';
let currentCourse = null;
let currentLessonIdx = 0;
let progress = JSON.parse(localStorage.getItem('fl_progress') || '{}');
let notes = JSON.parse(localStorage.getItem('fl_notes') || '{}');
let theme = localStorage.getItem('fl_theme') || 'light';

function save() {
  localStorage.setItem('fl_progress', JSON.stringify(progress));
  localStorage.setItem('fl_notes', JSON.stringify(notes));
  localStorage.setItem('fl_theme', theme);
}

function applyTheme() {
  document.body.setAttribute('data-theme', theme);
  document.getElementById('themeBtn').textContent = theme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
}

function toggleTheme() {
  theme = theme === 'dark' ? 'light' : 'dark';
  applyTheme();
  save();
}

function formatNum(n) {
  if (n >= 1000000) return (n/1000000).toFixed(1) + 'M';
  if (n >= 1000) return (n/1000).toFixed(0) + 'K';
  return n;
}

function getProgress(courseId) {
  if (!progress[courseId]) return 0;
  const course = courses.find(c => c.id === courseId);
  if (!course) return 0;
  const completed = progress[courseId].completed || [];
  return Math.round((completed.length / course.lessons.length) * 100);
}

function renderCategories() {
  document.getElementById('categories').innerHTML = categories.map(c => 
    `<div class="cat ${currentCategory === c ? 'active' : ''}" onclick="filterCategory('${c}')">${c}</div>`
  ).join('');
}

function filterCategory(cat) {
  currentCategory = cat;
  renderCategories();
  renderCourses();
}

function searchCourses() {
  const q = document.getElementById('searchInput').value.toLowerCase();
  const filtered = courses.filter(c => 
    c.title.toLowerCase().includes(q) || 
    c.instructor.toLowerCase().includes(q) ||
    c.category.toLowerCase().includes(q)
  );
  renderCourses(filtered);
}

function renderCourses(list = null) {
  const filtered = list || (currentCategory === 'All' ? courses : courses.filter(c => c.category === currentCategory));
  
  document.getElementById('courseGrid').innerHTML = filtered.length === 0 
    ? '<div class="empty">No courses found</div>'
    : filtered.map(c => {
        const prog = getProgress(c.id);
        return `
          <div class="course-card" onclick="openCourse(${c.id})">
            <div class="course-thumb">
              <img src="${c.thumb}" onerror="this.style.display='none'">
              <div class="course-badge">FREE</div>
              ${prog > 0 ? `<div class="course-progress"><div class="course-progress-bar" style="width:${prog}%"></div></div>` : ''}
            </div>
            <div class="course-info">
              <div class="course-title">${c.title}</div>
              <div class="course-instructor">${c.instructor}</div>
              <div class="course-meta">
                <span class="course-rating"><span class="stars">‚òÖ</span> ${c.rating}</span>
                <span>(${formatNum(c.students)})</span>
              </div>
              <div class="course-price">Free</div>
              <div class="lesson-count">üìπ ${c.lessons.length} lessons</div>
            </div>
          </div>
        `;
      }).join('');
}

function renderContinueLearning() {
  const inProgress = courses.filter(c => {
    const prog = getProgress(c.id);
    return prog > 0 && prog < 100;
  });
  
  const section = document.getElementById('continueSection');
  const list = document.getElementById('continueList');
  
  if (inProgress.length === 0) {
    section.style.display = 'none';
    return;
  }
  
  section.style.display = 'block';
  list.innerHTML = inProgress.slice(0,3).map(c => {
    const prog = getProgress(c.id);
    const completed = progress[c.id]?.completed || [];
    const nextIdx = completed.length < c.lessons.length ? completed.length : 0;
    const nextLesson = c.lessons[nextIdx];
    return `
      <div class="continue-card" onclick="openCourse(${c.id})">
        <img class="continue-thumb" src="${c.thumb}" onerror="this.style.background='#ddd'">
        <div class="continue-info">
          <div class="continue-title">${c.title}</div>
          <div class="continue-lesson">‚ñ∂ ${nextLesson.title}</div>
          <div class="progress-bar"><div class="progress-fill" style="width:${prog}%"></div></div>
          <div class="progress-text">${prog}% complete</div>
        </div>
      </div>
    `;
  }).join('');
}

function showMyLearning() {
  const started = courses.filter(c => getProgress(c.id) > 0);
  if (started.length === 0) {
    alert('Start a course first!');
    return;
  }
  currentCategory = 'All';
  renderCategories();
  renderCourses(started);
}

function openCourse(id) {
  currentCourse = courses.find(c => c.id === id);
  if (!currentCourse) return;
  
  const completed = progress[id]?.completed || [];
  currentLessonIdx = completed.length < currentCourse.lessons.length ? completed.length : 0;
  
  document.getElementById('homePage').style.display = 'none';
  document.getElementById('playerPage').classList.add('active');
  document.getElementById('playerCourseTitle').textContent = currentCourse.title;
  document.getElementById('lessonCount').textContent = currentCourse.lessons.length + ' lessons';
  
  renderLessonsList();
  playLesson(currentLessonIdx);
}

function exitCourse() {
  document.getElementById('playerPage').classList.remove('active');
  document.getElementById('homePage').style.display = 'block';
  document.getElementById('videoContainer').innerHTML = '';
  renderContinueLearning();
  renderCourses();
}

function renderLessonsList() {
  const completed = progress[currentCourse.id]?.completed || [];
  
  document.getElementById('lessonList').innerHTML = currentCourse.lessons.map((l, i) => `
    <div class="lesson-item ${i === currentLessonIdx ? 'active' : ''} ${completed.includes(i) ? 'completed' : ''}" onclick="playLesson(${i})">
      <div class="lesson-check">${completed.includes(i) ? '‚úì' : i + 1}</div>
      <div class="lesson-info">
        <div class="lesson-num">Lesson ${i + 1}</div>
        <div class="lesson-name">${l.title}</div>
      </div>
      <div class="lesson-dur">${l.duration}</div>
    </div>
  `).join('');
  
  updateProgressDisplay();
}

function updateProgressDisplay() {
  const prog = getProgress(currentCourse.id);
  const completed = progress[currentCourse.id]?.completed || [];
  document.getElementById('playerProgressText').textContent = `${prog}%`;
}

function playLesson(idx) {
  if (idx < 0 || idx >= currentCourse.lessons.length) return;
  
  currentLessonIdx = idx;
  const lesson = currentCourse.lessons[idx];
  const completed = progress[currentCourse.id]?.completed || [];
  
  document.getElementById('videoContainer').innerHTML = `
    <iframe src="https://www.youtube.com/embed/${lesson.videoId}?autoplay=1&rel=0" allow="accelerometer;autoplay;clipboard-write;encrypted-media;gyroscope;picture-in-picture" allowfullscreen></iframe>
  `;
  
  document.getElementById('videoTitle').textContent = lesson.title;
  document.getElementById('videoChannel').textContent = '‚è± ' + lesson.duration + ' ‚Ä¢ ' + currentCourse.instructor;
  
  const btn = document.getElementById('completeBtn');
  if (completed.includes(idx)) {
    btn.classList.add('done');
    btn.textContent = '‚úì Completed';
  } else {
    btn.classList.remove('done');
    btn.textContent = '‚úì Mark Complete';
  }
  
  renderLessonsList();
}

function toggleComplete() {
  if (!progress[currentCourse.id]) {
    progress[currentCourse.id] = { completed: [] };
  }
  
  const completed = progress[currentCourse.id].completed;
  
  if (completed.includes(currentLessonIdx)) {
    progress[currentCourse.id].completed = completed.filter(i => i !== currentLessonIdx);
  } else {
    completed.push(currentLessonIdx);
    progress[currentCourse.id].completed = [...new Set(completed)].sort((a,b) => a - b);
    
    if (currentLessonIdx < currentCourse.lessons.length - 1) {
      setTimeout(() => playLesson(currentLessonIdx + 1), 500);
    }
  }
  
  save();
  renderLessonsList();
  
  const btn = document.getElementById('completeBtn');
  if (progress[currentCourse.id].completed.includes(currentLessonIdx)) {
    btn.classList.add('done');
    btn.textContent = '‚úì Completed';
  } else {
    btn.classList.remove('done');
    btn.textContent = '‚úì Mark Complete';
  }
  
  if (getProgress(currentCourse.id) === 100) {
    setTimeout(showCertificate, 500);
  }
}

function prevLesson() {
  if (currentLessonIdx > 0) playLesson(currentLessonIdx - 1);
}

function nextLesson() {
  if (currentLessonIdx < currentCourse.lessons.length - 1) playLesson(currentLessonIdx + 1);
}

function openNotes() {
  document.getElementById('notesModal').classList.add('show');
  renderNotes();
}

function closeNotes() {
  document.getElementById('notesModal').classList.remove('show');
}

function saveNote() {
  const text = document.getElementById('noteInput').value.trim();
  if (!text) return;
  
  const key = currentCourse.id + '-' + currentLessonIdx;
  if (!notes[key]) notes[key] = [];
  
  notes[key].push({ text, time: new Date().toLocaleString() });
  
  save();
  document.getElementById('noteInput').value = '';
  renderNotes();
}

function renderNotes() {
  const key = currentCourse.id + '-' + currentLessonIdx;
  const lessonNotes = notes[key] || [];
  
  document.getElementById('notesList').innerHTML = lessonNotes.length === 0 
    ? '<div class="empty">No notes yet</div>'
    : lessonNotes.map((n, i) => `
        <div class="note-item">
          <span class="note-delete" onclick="deleteNote(${i})">Delete</span>
          <div class="note-time">${n.time}</div>
          <div class="note-text">${n.text}</div>
        </div>
      `).join('');
}

function deleteNote(idx) {
  const key = currentCourse.id + '-' + currentLessonIdx;
  notes[key].splice(idx, 1);
  save();
  renderNotes();
}

function showCertificate() {
  document.getElementById('certCourse').textContent = currentCourse.title;
  document.getElementById('certModal').classList.add('show');
}

function closeCert() {
  document.getElementById('certModal').classList.remove('show');
}

function goHome() {
  document.getElementById('playerPage').classList.remove('active');
  document.getElementById('homePage').style.display = 'block';
  document.getElementById('searchInput').value = '';
  currentCategory = 'All';
  renderCategories();
  renderCourses();
  renderContinueLearning();
}

applyTheme();
renderCategories();
renderCourses();
renderContinueLearning();
</script>
</body>
</html>
